# RT-GM2-9
Получение пароля суперадминистратора, включение <b>SSH</b> и отключение <b>TR-068</b> на оптическом терминале <b>RT-GM2-9</b> с прошивкой <b>1.6.1379</b>.

Работает на <b>python3</b>, проверено на прошивке <b>1.6.1379</b> (вроде как самой новой).

Совместимость с другими моделями/прошивками нужно проверять, как минимум на модели <b>RT-GM-3</b> [сработало](https://4pda.to/forum/index.php?showtopic=1033597&view=findpost&p=131973147).

<b>Понадобится установить библиотеки `PyCryptodome`,`requests` и `paramiko` (если нужно отключить TR-069)</b>

Оптические терминалы <b>RT-XX-X</b> серии славятся тем, что провайдер (Ростелеком или Планета) предоставляющий их, как правило, не считает нужным делиться логином и паролем суперадминистратора.
А между прочим говоря, именно аккаунт суперадминистратора позволит вам РЕАЛЬНО администрировать роутер, тогда как аккаунт обыкновенного админа, разрешает разве что почитать букавы и сменить название <b>Wi-Fi</b> сети.


<h1>Запуск</h1>
   <h2>Обязательные параметры</h2>
   <b>-L</b>, <b>--login</b> - логин администратора
   
   <b>-P</b>,<b>--password</b> - пароль администратора

   Если указать только их, вы просто получите пароль суперадминистратора в файле <b>superadmin.txt</b>

   <h2>Необязательные параметры</h2>
   <b>-H</b>, <b>--host</b> - <b>IP</b>-адрес (или имя хоста) роутера, если стандартный <b>HTTP</b> порт каким-то образом изменен, указывайте его через двоеточие
   
   <b>-M</b>, <b>--mod</b> - название модели роутера, по совместительству - ключ расшифровки конфигурационного файла
   
   <b>-S</b>, <b>--ssh</b> - запуск <b>SSH</b> сервера на <b>22</b>-м порте
   
   <b>-T</b>, <b>--tr</b> - выключение <b>TR-069</b>, требуется <b>paramiko</b> и работающий <b>SSH</b> сервер на роутере


<h1>Кому и для чего это может понадобиться ? Можно по-другому ?</h1>

Нужно это тому, кто хочет иметь полный административный доступ к своему роутеру, среди прочего, такой доступ дает возможность накатить бинарники <b>Entware</b> на роутер <b>RT-GM2-9</b> и обойти блокировку <b>YouTube</b>

По-другому можно.

1. Залогиньтесь на роутере.
2. Перейдите по адресу `http://[айпишник_роутера]/advanced/conSession.htm?id=666` и получите, так назывемый, ключ сессии. Вместо <b>666</b> можно указать любое число.
3. С полученным ключом сессии перейдите по адресу ` http://[айпишник_роутера]/config_old_tl.xgi?sessionKey=` куда после `sessionKey` вставьте этот самый ключ сессии.

   В ответ вы получите файл <b>config.bin</b>, так как он зашифрован, просмотреть его содержимое не представляется возможным, для начала файл нужно расшифровать.

4. Жмем сюда -> [4pda](https://4pda.to/forum/index.php?showtopic=1033597&st=1720#entry129238664) и переходим по первой ссылке из поста, куда вставляем полученный файл и указываем пароль от него, который из себя представляет название роутера, т.е <b>RT-GM2-9</b>
5. В ответ получаем расшифрованный <b>xml</b> файл конфигурации, в котором поиском по странице (<b>superadmin</b>) ищем данные суперадмина.
6. Логинимся с данными суперадмина, и в разделе `Система/Удаленное управление/IPv4` включаем <b>SSH</b>, так сказать, вручную. Не забудьте сменить интерфейс с любого указанного на <b>lan0</b>
7. Пробуем подключиться к <b>SSH</b> с помощью [PuTTY](https://www.putty.org/) или любой другой программы для работы с протоколом <b>SSH</b>.
8. Если нужно отключить <b>TR-069</b> пишем в терминале <b>подключенном к роутеру по SSH</b> 2 команды.

   <b>csmconf -s /InternetGatewayDevice/ManagementServer/EnableCWMP 0</b>
   
   <b>csmctl savecfg</b>

9. Переходим по адресу `http://[айпи роутера]/setup/sp_tr069_tl.htm` и смотрим результат.
